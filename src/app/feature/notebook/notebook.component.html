<div class="uk-section uk-section-primary">
    <div class="uk-container">
        <h3>Mi Cuaderno</h3>
        <ul class="task-list uk-list uk-list-divider">
            <li
                *ngFor="let task of tasks"
                class="uk-child-width-expand@s uk-text-center"
                uk-grid
            >
                <div
                    class="task"
                    [ngClass]="{'task-done': task.done}"
                    (click)="toggleTaskAsDone(task)"
                >{{ task.description }}</div>
                <div> {{ task.date | date: "dd/MM/yy" }}</div>
                <div> {{ task.time | date: "shortTime" }}</div>
                <div> {{ task.place }}</div>
                <div>
                    <span
                        [ngClass]="{'uk-badge': task.tag }"
                    > {{ task.tag }}</span>
                </div>
                <div>
                    <button
                        class="uk-button uk-button-text"
                        (click)="showDeleteModalForTask(task)"
                    >
                        <span uk-icon="icon:  trash"></span>
                    </button>
                </div>
            </li>
        </ul>
        <form
            *ngFor="let control of newTaskFormArray.controls; let i=index"
            class="new-task-form"
            [formGroup]="control"
        >
            <div class="uk-margin" uk-margin>
                <input
                    type="text"
                    class="uk-input uk-form-width-large"
                    formControlName="description"
                    (keyup.esc)="clearTaskChanges()"
                    spellcheck="false"
                    placeholder="Escriba su tarea aquí"
                >
                <div class="uk-inline">
                    <span
                        class="uk-form-icon uk-form-icon-flip"
                        uk-icon="icon:  calendar"
                    ></span>
                    <ng2-flatpickr
                        formControlName="date"
                        addClass="uk-input"
                        placeholder="Fecha"
                    >                        
                    </ng2-flatpickr>
                </div>
                <div class="uk-inline">
                    <span
                        class="uk-form-icon uk-form-icon-flip"
                        uk-icon="icon:  clock"
                    ></span>
                    <ng2-flatpickr
                        formControlName="time"
                        addClass="uk-input"
                        [config]="{
                            enableTime: true,
                            noCalendar: true,
                            dateFormat: 'H:i',
                            time_24hr: false
                        }"
                        placeholder="Hora"
                    >                        
                    </ng2-flatpickr>
                </div>
                <div class="uk-inline">
                    <span
                        class="uk-form-icon uk-form-icon-flip"
                        uk-icon="icon:  location"
                    ></span>
                    <input
                        type="text"
                        class="uk-input"
                        formControlName="place"
                        spellcheck="false"
                        placeholder="Lugar"
                        appAutocomplete
                        [options]="places"
                        >
                </div>
                <div class="uk-inline">
                    <span
                        class="uk-form-icon uk-form-icon-flip"
                        uk-icon="icon:  tag"
                    ></span>
                    <input
                        type="text"
                        class="uk-input"
                        formControlName="tag"
                        spellcheck="false"
                        placeholder="Categoría"
                        >
                </div>
                <div></div>
                <button
                    class="uk-button uk-button-default"
                    type="button"
                    (click)="saveTask(control.value)"
                >
                    <span uk-icon="icon:  check"></span>
                </button>
                <button
                    class="dismiss-new-task-button uk-button uk-button-default"
                    type="button"
                    (click)="clearTaskChanges()"
                >
                    <span uk-icon="icon:  close"></span>
                </button>
            </div>
        </form>
        <div class="uk-flex uk-flex-around">
            <button
                class="uk-button uk-button-default"
                (click)="promptForNewTask()"
            >
                Añadir tarea
            </button>
        </div>
    </div>
</div>
